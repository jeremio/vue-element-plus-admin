import{_ as e}from"./ContentWrap.28735b19.js";import{_ as a}from"./Search.5d73d954.js";import{_ as t}from"./Dialog.36361280.js";import{d as o,r as l,aC as r,m as i,o as s,c as m,g as n,a as d,w as p,Z as c,k as u,e as f,x as b,t as j,v,X as g}from"./index.aa2d114b.js";import{E as w}from"./el-button.92c2e8f8.js";import{E as h}from"./el-tag.655c37d4.js";import{_ as D}from"./Table.vue_vue_type_script_lang.eb6af6cd.js";import{g as x,d as y,s as _}from"./index.0baa85ca.js";import{u as k}from"./useTable.759e9114.js";import S from"./Write.57105294.js";import C from"./Detail.e109c293.js";import{u as P}from"./useCrudSchemas.dab9f182.js";import"./el-card.b344c6df.js";import"./el-popper.a6ed9fdc.js";import"./index2.3a12b7ca.js";import"./Form.0205b497.js";import"./el-col.b92c1b0d.js";import"./typescript2.c4bd19fd.js";import"./el-input.3aa0e129.js";import"./index2.d89ab46e.js";import"./event2.0717584c.js";import"./index2.51b4d2a5.js";import"./tsxHelper.bec594c9.js";import"./validator2.99c62d49.js";import"./resize-event2.cff746ae.js";import"./index2.045d794e.js";import"./scroll2.cafcf04b.js";import"./debounce.aee81f8a.js";import"./arrow-up.93c459e5.js";import"./el-input-number.a96fb661.js";import"./arrow-down.dc4a23a8.js";import"./el-switch.d1bb61af.js";import"./el-divider.682ede16.js";import"./InputPassword.8b94a876.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./Editor.bb924a89.js";import"./arrow-right.6b894432.js";import"./aria2.f3fb147b.js";import"./arrow-left.0c0b3b22.js";import"./browser2.f07dd78b.js";import"./useForm.75fcd50f.js";import"./el-overlay.be1d10cf.js";import"./vnode2.0be6a99f.js";import"./use-dialog2.72f8fbb3.js";import"./el-message-box.754bcfdc.js";import"./formRules.381f16d2.js";import"./Descriptions.f1913a22.js";import"./index2.7f5f88ed.js";import"./tree.9e4d3f05.js";const R={class:"mb-10px"},z=o({setup(o){const{register:z,tableObject:F,methods:L}=k({getListApi:x,delListApi:y,response:{list:"list",total:"total"}}),{getList:E,setSearchParams:Y}=L;E();const{t:H}=u(),T=l([{field:"index",label:H("tableDemo.index"),type:"index",form:{show:!1},detail:{show:!1}},{field:"title",label:H("tableDemo.title"),search:{show:!0},form:{colProps:{span:24}},detail:{span:24}},{field:"author",label:H("tableDemo.author")},{field:"display_time",label:H("tableDemo.displayTime"),form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:H("tableDemo.importance"),formatter:(e,a,t)=>r(h,{type:1===t?"success":2===t?"warning":"danger"},(()=>H(1===t?"tableDemo.important":2===t?"tableDemo.good":"tableDemo.commonly"))),form:{component:"Select",componentProps:{options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}}},{field:"pageviews",label:H("tableDemo.pageviews"),form:{component:"InputNumber",value:0}},{field:"content",label:H("exampleDemo.content"),table:{show:!1},form:{component:"Editor",colProps:{span:24}},detail:{span:24}},{field:"action",width:"260px",label:H("tableDemo.action"),form:{show:!1},detail:{show:!1}}]),{allSchemas:U}=P(T),V=i(!1),A=i(""),I=()=>{A.value=H("exampleDemo.add"),F.currentRow=null,V.value=!0},M=i(!1),W=async(e,a)=>{var t;F.currentRow=e;const{delList:o,getSelections:l}=L,r=await l();M.value=!0,await o(a?r.map((e=>e.id)):[null==(t=F.currentRow)?void 0:t.id],a).finally((()=>{M.value=!1}))},N=i(""),O=(e,a)=>{A.value=H("edit"===a?"exampleDemo.edit":"exampleDemo.detail"),N.value=a,F.currentRow=e,V.value=!0},X=i(),Z=i(!1),q=async()=>{var e;const a=d(X);await(null==(e=null==a?void 0:a.elFormRef)?void 0:e.validate((async e=>{if(e){Z.value=!0;const e=await(null==a?void 0:a.getFormData());await _({data:e}).catch((()=>{})).finally((()=>{Z.value=!1}))&&(V.value=!1,F.currentPage=1,E())}})))};return(o,l)=>(s(),m(c,null,[n(d(e),null,{default:p((()=>[n(d(a),{schema:d(U).searchSchema,onSearch:d(Y),onReset:d(Y)},null,8,["schema","onSearch","onReset"]),f("div",R,[n(d(w),{type:"primary",onClick:I},{default:p((()=>[b(j(d(H)("exampleDemo.add")),1)])),_:1}),n(d(w),{loading:M.value,type:"danger",onClick:l[0]||(l[0]=e=>W(null,!0))},{default:p((()=>[b(j(d(H)("exampleDemo.del")),1)])),_:1},8,["loading"])]),n(d(D),{pageSize:d(F).pageSize,"onUpdate:pageSize":l[1]||(l[1]=e=>d(F).pageSize=e),currentPage:d(F).currentPage,"onUpdate:currentPage":l[2]||(l[2]=e=>d(F).currentPage=e),columns:d(U).tableColumns,data:d(F).tableList,loading:d(F).loading,pagination:{total:d(F).total},onRegister:d(z)},{action:p((({row:e})=>[n(d(w),{type:"primary",onClick:a=>O(e,"edit")},{default:p((()=>[b(j(d(H)("exampleDemo.edit")),1)])),_:2},1032,["onClick"]),n(d(w),{type:"success",onClick:a=>O(e,"detail")},{default:p((()=>[b(j(d(H)("exampleDemo.detail")),1)])),_:2},1032,["onClick"]),n(d(w),{type:"danger",onClick:a=>W(e,!1)},{default:p((()=>[b(j(d(H)("exampleDemo.del")),1)])),_:2},1032,["onClick"])])),_:1},8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}),n(d(t),{modelValue:V.value,"onUpdate:modelValue":l[4]||(l[4]=e=>V.value=e),title:A.value},{footer:p((()=>["detail"!==N.value?(s(),v(d(w),{key:0,type:"primary",loading:Z.value,onClick:q},{default:p((()=>[b(j(d(H)("exampleDemo.save")),1)])),_:1},8,["loading"])):g("v-if",!0),n(d(w),{onClick:l[3]||(l[3]=e=>V.value=!1)},{default:p((()=>[b(j(d(H)("dialogDemo.close")),1)])),_:1})])),default:p((()=>["detail"!==N.value?(s(),v(S,{key:0,ref_key:"writeRef",ref:X,"form-schema":d(U).formSchema,"current-row":d(F).currentRow},null,8,["form-schema","current-row"])):g("v-if",!0),"detail"===N.value?(s(),v(C,{key:1,"detail-schema":d(U).detailSchema,"current-row":d(F).currentRow},null,8,["detail-schema","current-row"])):g("v-if",!0)])),_:1},8,["modelValue","title"])],64))}});export{z as default};
